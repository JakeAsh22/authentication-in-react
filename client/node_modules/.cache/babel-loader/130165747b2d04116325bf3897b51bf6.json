{"ast":null,"code":"var _jsxFileName = \"/Users/Guest/Desktop/react-ua/client/src/components/auth/RegistrationForm.js\";\nimport React from 'react';\nimport OktaAuth from '@okta/okta-auth-js';\nimport { withAuth } from '@okta/okta-react';\nimport config from '../../app.config';\nexport default withAuth(class RegistrationForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstName: '',\n      lastName: '',\n      email: '',\n      password: '',\n      sessionToken: null\n    };\n    this.oktaAuth = new OktaAuth({\n      url: config.url\n    });\n    this.checkAuthentication = this.checkAuthentication.bind(this);\n    this.checkAuthentication();\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleFirstNameChange = this.handleFirstNameChange.bind(this);\n    this.handleLastNameChange = this.handleLastNameChange.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n  }\n\n  async checkAuthentication() {\n    const sessionToken = await this.props.auth.getIdToken();\n\n    if (sessionToken) {\n      this.setState({\n        sessionToken\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    this.checkAuthentication();\n  }\n\n  handleFirstNameChange(e) {\n    this.setState({\n      firstName: e.target.value\n    });\n  }\n\n  handleLastNameChange(e) {\n    this.setState({\n      lastName: e.target.value\n    });\n  }\n\n  handleEmailChange(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  handlePasswordChange(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    fetch('/api/users', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(this.state)\n    }).then(user => {\n      this.oktaAuth.signIn({\n        username: this.state.email,\n        password: this.state.password\n      }).then(res => this.setState({\n        sessionToken: res.sessionToken\n      }));\n    }).catch(err => console.log);\n  }\n\n  render() {\n    if (this.state.sessionToken) {\n      this.props.auth.redirect({\n        sessionToken: this.state.sessionToken\n      });\n      return null;\n    }\n\n    return React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-element\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Email:\"), React.createElement(\"input\", {\n      type: \"email\",\n      id: \"email\",\n      value: this.state.email,\n      onChange: this.handleEmailChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-element\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"First Name:\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"firstName\",\n      value: this.state.firstName,\n      onChange: this.handleFirstNameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-element\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Last Name:\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"lastName\",\n      value: this.state.lastName,\n      onChange: this.handleLastNameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-element\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Password:\"), React.createElement(\"input\", {\n      type: \"password\",\n      id: \"password\",\n      value: this.state.password,\n      onChange: this.handlePasswordChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"submit\",\n      id: \"submit\",\n      value: \"Register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }));\n  }\n\n});","map":{"version":3,"sources":["/Users/Guest/Desktop/react-ua/client/src/components/auth/RegistrationForm.js"],"names":["React","OktaAuth","withAuth","config","RegistrationForm","Component","constructor","props","state","firstName","lastName","email","password","sessionToken","oktaAuth","url","checkAuthentication","bind","handleSubmit","handleFirstNameChange","handleLastNameChange","handleEmailChange","handlePasswordChange","auth","getIdToken","setState","componentDidUpdate","e","target","value","preventDefault","fetch","method","headers","Accept","body","JSON","stringify","then","user","signIn","username","res","catch","err","console","log","render","redirect"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,OAAOC,MAAP,MAAmB,kBAAnB;AAEA,eAAeD,QAAQ,CACrB,MAAME,gBAAN,SAA+BJ,KAAK,CAACK,SAArC,CAA+C;AAC7CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,SAAS,EAAE,EADA;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXC,MAAAA,KAAK,EAAE,EAHI;AAIXC,MAAAA,QAAQ,EAAE,EAJC;AAKXC,MAAAA,YAAY,EAAE;AALH,KAAb;AAOA,SAAKC,QAAL,GAAgB,IAAIb,QAAJ,CAAa;AAAEc,MAAAA,GAAG,EAAEZ,MAAM,CAACY;AAAd,KAAb,CAAhB;AACA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKD,mBAAL;AAEA,SAAKE,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BF,IAA3B,CAAgC,IAAhC,CAA7B;AACA,SAAKG,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BH,IAA1B,CAA+B,IAA/B,CAA5B;AACA,SAAKI,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBJ,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKK,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BL,IAA1B,CAA+B,IAA/B,CAA5B;AACD;;AAED,QAAMD,mBAAN,GAA4B;AAC1B,UAAMH,YAAY,GAAG,MAAM,KAAKN,KAAL,CAAWgB,IAAX,CAAgBC,UAAhB,EAA3B;;AACA,QAAIX,YAAJ,EAAkB;AAChB,WAAKY,QAAL,CAAc;AAAEZ,QAAAA;AAAF,OAAd;AACD;AACF;;AAEDa,EAAAA,kBAAkB,GAAG;AACnB,SAAKV,mBAAL;AACD;;AAEDG,EAAAA,qBAAqB,CAACQ,CAAD,EAAI;AACvB,SAAKF,QAAL,CAAc;AAAEhB,MAAAA,SAAS,EAAEkB,CAAC,CAACC,MAAF,CAASC;AAAtB,KAAd;AACD;;AACDT,EAAAA,oBAAoB,CAACO,CAAD,EAAI;AACtB,SAAKF,QAAL,CAAc;AAAEf,MAAAA,QAAQ,EAAEiB,CAAC,CAACC,MAAF,CAASC;AAArB,KAAd;AACD;;AACDR,EAAAA,iBAAiB,CAACM,CAAD,EAAI;AACnB,SAAKF,QAAL,CAAc;AAAEd,MAAAA,KAAK,EAAEgB,CAAC,CAACC,MAAF,CAASC;AAAlB,KAAd;AACD;;AACDP,EAAAA,oBAAoB,CAACK,CAAD,EAAI;AACtB,SAAKF,QAAL,CAAc;AAAEb,MAAAA,QAAQ,EAAEe,CAAC,CAACC,MAAF,CAASC;AAArB,KAAd;AACD;;AAEDX,EAAAA,YAAY,CAACS,CAAD,EAAI;AACdA,IAAAA,CAAC,CAACG,cAAF;AACAC,IAAAA,KAAK,CAAC,YAAD,EAAe;AAClBC,MAAAA,MAAM,EAAE,MADU;AAElBC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB;AAFT,OAFS;AAMlBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAK7B,KAApB;AANY,KAAf,CAAL,CAQG8B,IARH,CAQQC,IAAI,IAAI;AACZ,WAAKzB,QAAL,CACG0B,MADH,CACU;AACNC,QAAAA,QAAQ,EAAE,KAAKjC,KAAL,CAAWG,KADf;AAENC,QAAAA,QAAQ,EAAE,KAAKJ,KAAL,CAAWI;AAFf,OADV,EAKG0B,IALH,CAKQI,GAAG,IACP,KAAKjB,QAAL,CAAc;AACZZ,QAAAA,YAAY,EAAE6B,GAAG,CAAC7B;AADN,OAAd,CANJ;AAUD,KAnBH,EAoBG8B,KApBH,CAoBSC,GAAG,IAAIC,OAAO,CAACC,GApBxB;AAqBD;;AAEDC,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKvC,KAAL,CAAWK,YAAf,EAA6B;AAC3B,WAAKN,KAAL,CAAWgB,IAAX,CAAgByB,QAAhB,CAAyB;AAAEnC,QAAAA,YAAY,EAAE,KAAKL,KAAL,CAAWK;AAA3B,OAAzB;AACA,aAAO,IAAP;AACD;;AAED,WACE;AAAM,MAAA,QAAQ,EAAE,KAAKK,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,EAAE,EAAC,OAFL;AAGE,MAAA,KAAK,EAAE,KAAKV,KAAL,CAAWG,KAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKU,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,EAUE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,EAAE,EAAC,WAFL;AAGE,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWC,SAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKU,qBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAVF,EAmBE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,EAAE,EAAC,UAFL;AAGE,MAAA,KAAK,EAAE,KAAKX,KAAL,CAAWE,QAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKU,oBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAnBF,EA4BE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,EAAE,EAAC,UAFL;AAGE,MAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWI,QAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKU,oBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CA5BF,EAqCE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,EAAE,EAAC,QAAxB;AAAiC,MAAA,KAAK,EAAC,UAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArCF,CADF;AAyCD;;AArH4C,CAD1B,CAAvB","sourcesContent":["import React from 'react';\nimport OktaAuth from '@okta/okta-auth-js';\nimport { withAuth } from '@okta/okta-react';\n\nimport config from '../../app.config';\n\nexport default withAuth(\n  class RegistrationForm extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        firstName: '',\n        lastName: '',\n        email: '',\n        password: '',\n        sessionToken: null\n      };\n      this.oktaAuth = new OktaAuth({ url: config.url });\n      this.checkAuthentication = this.checkAuthentication.bind(this);\n      this.checkAuthentication();\n\n      this.handleSubmit = this.handleSubmit.bind(this);\n      this.handleFirstNameChange = this.handleFirstNameChange.bind(this);\n      this.handleLastNameChange = this.handleLastNameChange.bind(this);\n      this.handleEmailChange = this.handleEmailChange.bind(this);\n      this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    }\n\n    async checkAuthentication() {\n      const sessionToken = await this.props.auth.getIdToken();\n      if (sessionToken) {\n        this.setState({ sessionToken });\n      }\n    }\n\n    componentDidUpdate() {\n      this.checkAuthentication();\n    }\n\n    handleFirstNameChange(e) {\n      this.setState({ firstName: e.target.value });\n    }\n    handleLastNameChange(e) {\n      this.setState({ lastName: e.target.value });\n    }\n    handleEmailChange(e) {\n      this.setState({ email: e.target.value });\n    }\n    handlePasswordChange(e) {\n      this.setState({ password: e.target.value });\n    }\n\n    handleSubmit(e) {\n      e.preventDefault();\n      fetch('/api/users', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.state)\n      })\n        .then(user => {\n          this.oktaAuth\n            .signIn({\n              username: this.state.email,\n              password: this.state.password\n            })\n            .then(res =>\n              this.setState({\n                sessionToken: res.sessionToken\n              })\n            );\n        })\n        .catch(err => console.log);\n    }\n\n    render() {\n      if (this.state.sessionToken) {\n        this.props.auth.redirect({ sessionToken: this.state.sessionToken });\n        return null;\n      }\n\n      return (\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-element\">\n            <label>Email:</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              value={this.state.email}\n              onChange={this.handleEmailChange}\n            />\n          </div>\n          <div className=\"form-element\">\n            <label>First Name:</label>\n            <input\n              type=\"text\"\n              id=\"firstName\"\n              value={this.state.firstName}\n              onChange={this.handleFirstNameChange}\n            />\n          </div>\n          <div className=\"form-element\">\n            <label>Last Name:</label>\n            <input\n              type=\"text\"\n              id=\"lastName\"\n              value={this.state.lastName}\n              onChange={this.handleLastNameChange}\n            />\n          </div>\n          <div className=\"form-element\">\n            <label>Password:</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={this.state.password}\n              onChange={this.handlePasswordChange}\n            />\n          </div>\n          <input type=\"submit\" id=\"submit\" value=\"Register\" />\n        </form>\n      );\n    }\n  }\n);"]},"metadata":{},"sourceType":"module"}